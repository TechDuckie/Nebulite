@font-face {
    font-family: 'Poppkorn';
    src: url('assets/PoppkornRegular-MzKY.ttf') format('truetype');
}

:root{--bg:#120b1b;--ui:#ddd}
    html,body{height:100%;margin:0;background:var(--bg);-webkit-tap-highlight-color:transparent;touch-action:none;font-family:"Poppkorn", system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    #gameWrap{position:fixed;top: 0; right: 0; bottom: 0; left: 0;overflow:hidden;z-index:2}
    canvas{display:block;width:100vw;height:100vh;background:transparent;}
    #starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      overflow: hidden;
    }
    .star {
      position: absolute;
      background-size: contain;
      background-repeat: no-repeat;
      animation: fadeIn 0.5s ease-out;
    }
    #motherShipImage {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 300px;
      animation: float 6s ease-in-out infinite;
      z-index: 50;
    }
    @keyframes float {
      0% { transform: translate(-50%, 0px); }
      50% { transform: translate(-50%, -20px); }
      100% { transform: translate(-50%, 0px); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* UI overlay */
    .ui {position:fixed;left:0;top:0;right:0;bottom:0;pointer-events:none;}
    .hud {position:fixed;left:10px;top:10px;color:var(--ui);font-size:14px;pointer-events:none}
    .hud .hearts{display:inline-block;margin-left:8px}
    .hearts span{color:#e74c3c;margin-right:6px;font-size:18px}
    .waveInfo{position:fixed;left:50%;top:10px;transform:translateX(-50%);color:var(--ui);font-size:14px}
    .bossBar{position:fixed;left:50%;top:34px;transform:translateX(-50%);width:60%;height:12px;background:rgba(255,255,255,0.06);border: 2px solid white;box-sizing: border-box;overflow:hidden;display:none}
    .bossBarInner{height:100%;background:#ffb86b;width:100%}
    /* joystick + buttons */
    .left-joystick, .right-buttons{position:absolute;pointer-events:auto}
    .left-joystick{left:8px;bottom:8px;width:140px;height:140px;max-width:22vw;max-height:22vw;}
    .right-buttons{right:8px;bottom:8px;width:170px;height:140px;display:flex;gap:12px;justify-content:flex-end;align-items:flex-end;max-width:30vw;max-height:22vw;pointer-events:auto}
    .btn{width:64px;height:64px;border-radius:0;background:transparent;border:2px solid white;display:flex;align-items:center;justify-content:center;touch-action:manipulation}
    .btn:active{transform:translateY(2px) scale(0.98)}
    .btn img{width:36px;height:36px;object-fit:contain}
    .joystick-base {
      width: 100%;
      height: 100%;
      border: 2px solid white;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .joystick-knob {
      width: 40px;
      height: 40px;
      background: white;
    }
    /* screens (menu/levels) */
    .screen {position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background: var(--bg);color:var(--ui);z-index:40}
    .menu-panel {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .game-title {
      font-family: 'Poppkorn', sans-serif;
      font-size: clamp(3rem, 15vw, 6rem);
      color: var(--ui);
      text-shadow: 4px 4px 0px #4b8bcf, 8px 8px 0px #e641ba;
      margin-bottom: 40px;
    }

    .menu-panel > div {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel {
      background: rgba(10, 8, 15, 0.9);
      padding: 20px;
      border-radius: 0;
      border: 2px solid white;
      width: 92%;
      max-width: 420px;
      text-align: center;
    }


    .btn-ui {
      font-family: "Poppkorn", sans-serif;
      background: transparent;
      color: white;
      border: 2px solid white;
      padding: 12px 24px;
      margin: 10px;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-ui:hover {
      background: white;
      color: var(--bg);
    }
    .dialogue-panel {
      width: 100%;
      max-width: 100%;
      height: 33.33vh;
      position: absolute;
      bottom: 0;
      border-radius: 0;
      border-top: 2px solid white;
      border-bottom: none;
      border-left: none;
      border-right: none;
      display: flex;
      align-items: flex-start; /* Changed to flex-start */
      padding: 15px;
      box-sizing: border-box;
    }
    #dialogueImage {
      width: 100px;
      height: 100px;
      margin-right: 15px;
      object-fit: cover;
      border: 2px solid white;
      flex-shrink: 0;
    }
    .dialogue-content {
      display: flex;
      flex-direction: column;
      align-items: center; /* Changed to center */
      flex-grow: 1;
    }
    #dialogueText {
      font-size: 18px;
      margin: 0;
      color: var(--ui);
      /* Removed align-self: flex-start; */
    }
    #btnDialogueGo {
      margin-top: 10px; /* Added margin for spacing */
    }
    .levels-grid{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .level-btn{width:88px;height:88px;border-radius:10px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;font-size:16px;color:var(--ui);border:2px solid rgba(255,255,255,0.04)}
    .level-btn.locked{opacity:0.35}
    .small{font-size:12px;color:#aaa;margin-top:6px}
    .debug{position:fixed;left:8px;bottom:8px;color:#999;font-size:12px;pointer-events:none}

.bossName {
  position: fixed;
  left: 50%;
  top: 50px;
  transform: translateX(-50%);
  color: var(--ui);
  font-size: 14px;
  display: none;
  font-family: "Poppkorn", sans-serif;
}

.settings-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 100%;
  padding: 10px;
}

.setting {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.setting label {
  font-size: 18px;
  font-family: "Poppkorn", sans-serif;
}

input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 80%;
  height: 8px;
  background: transparent;
  border: 2px solid white;
  cursor: pointer;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: white;
  cursor: pointer;
}

input[type="range"]::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: white;
  cursor: pointer;
  border: none;
}